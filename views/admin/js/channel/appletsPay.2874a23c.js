(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["channel/appletsPay"],{"0b88":function(e,t,r){},"3f3b":function(e,t,r){"use strict";r("0b88")},cc33:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"le-matter"},[r("el-form",{ref:"bind",staticClass:"le-form",attrs:{rules:e.rules,model:e.form,"label-width":"190px"}},[r("div",{staticClass:"le-form__header flex align-center"},[r("span",{staticClass:"le-tip"}),r("span",{staticClass:"le-text"},[e._v("小程序支付配置")])]),r("el-form-item",{attrs:{label:"支付方式"}},[r("span",{staticClass:"le-text"},[e._v("微信支付")])]),r("el-form-item",{attrs:{label:"支付类型"}},[r("span",{staticClass:"le-text"},[e._v("普通商户")])]),r("el-form-item",{attrs:{label:"微信AppID",prop:"appid"}},[r("el-input",{attrs:{placeholder:"请输入微信AppID"},model:{value:e.form.appid,callback:function(t){e.$set(e.form,"appid",t)},expression:"form.appid"}})],1),r("el-form-item",{attrs:{label:"微信支付商户号",prop:"mchid"}},[r("el-input",{attrs:{placeholder:"请输入微信支付商户号"},model:{value:e.form.mchid,callback:function(t){e.$set(e.form,"mchid",t)},expression:"form.mchid"}})],1),r("el-form-item",{attrs:{label:"支付版本选择",prop:"pay_version"}},[r("el-radio",{attrs:{label:"common"},model:{value:e.form.pay_version,callback:function(t){e.$set(e.form,"pay_version",t)},expression:"form.pay_version"}},[e._v("老版本(小程序后台显示微信支付)")]),r("el-radio",{attrs:{label:"wx"},model:{value:e.form.pay_version,callback:function(t){e.$set(e.form,"pay_version",t)},expression:"form.pay_version"}},[e._v("新版本(小程序后台显示支付管理) 注:需要配置小程序消息推送 "),r("span",{staticStyle:{color:"#606266"}},[e._v("注：需要配置小程序消息推送-")]),r("el-button",{staticStyle:{"padding-left":"0"},attrs:{type:"text"},on:{click:function(t){return t.stopPropagation(),e.toUrl("coupon")}}},[e._v("去配置")])],1)],1),"common"==e.form.pay_version?r("el-form-item",{attrs:{label:"微信支付接口版本",prop:"api_version"}},[r("el-radio",{attrs:{label:"v2"},model:{value:e.form.api_version,callback:function(t){e.$set(e.form,"api_version",t)},expression:"form.api_version"}},[e._v("v2（设置api v2秘钥）")]),r("el-radio",{attrs:{label:"v3"},model:{value:e.form.api_version,callback:function(t){e.$set(e.form,"api_version",t)},expression:"form.api_version"}},[e._v("v3（设置api v3秘钥）")])],1):e._e(),"common"==e.form.pay_version?r("el-form-item",{attrs:{label:"微信支付Api密钥",prop:"key"}},[r("el-input",{attrs:{placeholder:"请输入微信支付Api密钥"},model:{value:e.form.key,callback:function(t){e.$set(e.form,"key",t)},expression:"form.key"}})],1):e._e(),"common"==e.form.pay_version?r("el-form-item",{attrs:{prop:"certPem"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 微信支付"),r("br"),e._v(" apiclient_cert.pem ")]),r("el-input",{attrs:{type:"textarea",resize:"none",rows:5,placeholder:"请输入微信支付apiclient_cert.pem"},model:{value:e.form.certPem,callback:function(t){e.$set(e.form,"certPem",t)},expression:"form.certPem"}})],1):e._e(),"common"==e.form.pay_version?r("el-form-item",{attrs:{prop:"keyPem"}},[r("span",{attrs:{slot:"label"},slot:"label"},[e._v(" 微信支付"),r("br"),e._v(" apiclient_key.pem ")]),r("el-input",{attrs:{type:"textarea",resize:"none",rows:5,placeholder:"请输入微信支付apiclient_key.pem"},model:{value:e.form.keyPem,callback:function(t){e.$set(e.form,"keyPem",t)},expression:"form.keyPem"}})],1):e._e()],1),r("div",{staticClass:"le-cardpin"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save("bind")}}},[e._v("保存")])],1)],1)},o=[],s={name:"applets-pay",data:function(){return{form:{appid:"",isService:0},rules:{appid:[{required:!0,message:"请输入微信AppID",trigger:"blur"}],mchid:[{required:!0,message:"请输入微信支付商户号",trigger:"blur"}],key:[{required:!0,message:"请输入微信支付Api密钥",trigger:"blur"}],certPem:[{required:!0,message:"请输入微信支付apiclient_cert.pem",trigger:"blur"}],keyPem:[{required:!0,message:"请输入微信支付apiclient_key.pem",trigger:"blur"}]}}},methods:{save:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$heshop.appconfig("post",{behavior:"save",key:"appPay_weapp"},t.form).then((function(e){t.$notify({title:"保存成功",message:"微信支付手动绑定成功。",type:"success"}),t.toBind=!1,t.bind=!1})).catch((function(e){t.$message.error(e.data.message)}))}))},getConfig:function(){var e=this;this.$heshop.appconfig("get").then((function(t){e.form=t.appPay.weapp})).catch((function(t){e.$message.error(t.data.message)}))},toUrl:function(){this.$router.push({path:"/setup/features?activeName=server"})}},mounted:function(){this.getConfig()}},i=s,l=(r("3f3b"),r("2877")),n=Object(l["a"])(i,a,o,!1,null,"77e97861",null);t["default"]=n.exports}}]);